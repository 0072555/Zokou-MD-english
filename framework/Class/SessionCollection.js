const a66_0x21cc67=a66_0x1d03;(function(_0x852d0e,_0x9cd463){const _0x28e15d=a66_0x1d03,_0x20cb00=_0x852d0e();while(!![]){try{const _0xd208a8=parseInt(_0x28e15d(0xba))/0x1+-parseInt(_0x28e15d(0xb7))/0x2*(parseInt(_0x28e15d(0xb6))/0x3)+-parseInt(_0x28e15d(0xc2))/0x4+-parseInt(_0x28e15d(0xb2))/0x5+-parseInt(_0x28e15d(0xb3))/0x6+-parseInt(_0x28e15d(0xb8))/0x7+parseInt(_0x28e15d(0xb9))/0x8;if(_0xd208a8===_0x9cd463)break;else _0x20cb00['push'](_0x20cb00['shift']());}catch(_0x6b7ec1){_0x20cb00['push'](_0x20cb00['shift']());}}}(a66_0x3b19,0xd68df));function a66_0x1d03(_0x3feed7,_0x21a4e4){const _0x2b1e6a=a66_0x3b19();return a66_0x1d03=function(_0xb0c4ae,_0x597a2b){_0xb0c4ae=_0xb0c4ae-0xb2;let _0x3b19d8=_0x2b1e6a[_0xb0c4ae];if(a66_0x1d03['cNZrWU']===undefined){var _0x1d0373=function(_0x1d3880){const _0x14a442='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5dcbb4='',_0x53fc20='',_0x49a2bf=_0x5dcbb4+_0x1d0373;for(let _0x49375=0x0,_0x468f63,_0x55a8c5,_0x115779=0x0;_0x55a8c5=_0x1d3880['charAt'](_0x115779++);~_0x55a8c5&&(_0x468f63=_0x49375%0x4?_0x468f63*0x40+_0x55a8c5:_0x55a8c5,_0x49375++%0x4)?_0x5dcbb4+=_0x49a2bf['charCodeAt'](_0x115779+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x468f63>>(-0x2*_0x49375&0x6)):_0x49375:0x0){_0x55a8c5=_0x14a442['indexOf'](_0x55a8c5);}for(let _0x809034=0x0,_0xb470f0=_0x5dcbb4['length'];_0x809034<_0xb470f0;_0x809034++){_0x53fc20+='%'+('00'+_0x5dcbb4['charCodeAt'](_0x809034)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x53fc20);};a66_0x1d03['ODXiAJ']=_0x1d0373,_0x3feed7=arguments,a66_0x1d03['cNZrWU']=!![];}const _0x52a0d3=_0x2b1e6a[0x0],_0x4af985=_0xb0c4ae+_0x52a0d3,_0x39326c=_0x3feed7[_0x4af985];if(!_0x39326c){const _0x306a34=function(_0x4afaf8){this['idZajX']=_0x4afaf8,this['TuKtDn']=[0x1,0x0,0x0],this['QjstXV']=function(){return'newState';},this['edjgVX']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['roDLiW']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x306a34['prototype']['LJRqMB']=function(){const _0x51afa1=new RegExp(this['edjgVX']+this['roDLiW']),_0x205866=_0x51afa1['test'](this['QjstXV']['toString']())?--this['TuKtDn'][0x1]:--this['TuKtDn'][0x0];return this['rNjPwX'](_0x205866);},_0x306a34['prototype']['rNjPwX']=function(_0x134de5){if(!Boolean(~_0x134de5))return _0x134de5;return this['TqnMNo'](this['idZajX']);},_0x306a34['prototype']['TqnMNo']=function(_0x452f0b){for(let _0xa29f03=0x0,_0x24d10f=this['TuKtDn']['length'];_0xa29f03<_0x24d10f;_0xa29f03++){this['TuKtDn']['push'](Math['round'](Math['random']())),_0x24d10f=this['TuKtDn']['length'];}return _0x452f0b(this['TuKtDn'][0x0]);},new _0x306a34(a66_0x1d03)['LJRqMB'](),_0x3b19d8=a66_0x1d03['ODXiAJ'](_0x3b19d8),_0x3feed7[_0x4af985]=_0x3b19d8;}else _0x3b19d8=_0x39326c;return _0x3b19d8;},a66_0x1d03(_0x3feed7,_0x21a4e4);}function a66_0x3b19(){const _0x57fb2d=['zMv0y2HgB3jeB2nZ','zgf0yq','mty2mJLkBuzvEuW','ntyYEu5ovgfe','mZq0ntaZnNnos3rVCa','mZCZodi4ntzutfP0yK8','mJG4odiZzND0q1nJ','C2vZC2LVBKfWAq','z2v0','ywrKu2vZC2LVBG','Ahr0Chm6lY96B2TVDs1ZzxnZAw9UlwfWAs52zxjJzwWUyxbW','zM91BMq','Dg9tDhjPBMC','z2v0u2vZC2LVBG','mJKYoduWnhLKCwn4wa','CMvTB3zLrg9JC0zYB21jza','Bg9HzhneB2nZ','CMvSB2fKu2vZC2LVBG','lI4VlI4VyMrKl2f1DgG','zg9JDw1LBNrZ','mZqXodK0nxnquvLtrq','mZCWmZmXngL6u2T3Ea'];a66_0x3b19=function(){return _0x57fb2d;};return a66_0x3b19();}const a66_0x597a2b=(function(){let _0x3d4b6a=!![];return function(_0x3ec706,_0x205454){const _0x4aad1f=_0x3d4b6a?function(){if(_0x205454){const _0x110afe=_0x205454['apply'](_0x3ec706,arguments);return _0x205454=null,_0x110afe;}}:function(){};return _0x3d4b6a=![],_0x4aad1f;};}()),a66_0xb0c4ae=a66_0x597a2b(this,function(){const _0x326ebc=a66_0x1d03;return a66_0xb0c4ae[_0x326ebc(0xc0)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a66_0xb0c4ae)['search']('(((.+)+)+)+$');});a66_0xb0c4ae();const sessionDb=require('../../bdd/session'),authDb=require(a66_0x21cc67(0xc6)),axios=require('axios');class SessionManager{[a66_0x21cc67(0xbb)]=a66_0x21cc67(0xbe);#userId=null;#shouldReloadSession=![];#userSession=null;constructor(_0x3d9251,_0x39e697=null){const _0x5143ec=a66_0x21cc67;this.#userId=_0x3d9251,this.#userSession=_0x39e697;const _0x498923=sessionDb[_0x5143ec(0xc1)](this.#userId);if(!_0x498923){sessionDb[_0x5143ec(0xbd)](_0x3d9251,this.#userSession);if(_0x39e697)this.#shouldReloadSession=!![];return;}if(_0x498923?.['id']==this.#userSession){if(_0x39e697==null)return;return this.#checkIfShouldReconnect();}authDb[_0x5143ec(0xc3)](this.#userId),sessionDb[_0x5143ec(0xbd)](this.#userId,this.#userSession),this.#shouldReloadSession=!![];}async[a66_0x21cc67(0xb4)](_0x4fcd65){const _0x122bab=a66_0x21cc67,_0x5eaa76=await axios[_0x122bab(0xbc)](this['sessionApi']+'/session/'+_0x4fcd65+'?remove=true');if(_0x5eaa76?.[_0x122bab(0xb5)]?.[_0x122bab(0xbf)])return _0x5eaa76[_0x122bab(0xb5)][_0x122bab(0xc7)];else throw new Error();}get['shouldReloadSession'](){return this.#shouldReloadSession;}async[a66_0x21cc67(0xc5)](){const _0x255ad9=a66_0x21cc67,_0x549531=await this[_0x255ad9(0xb4)](this.#userSession);authDb[_0x255ad9(0xc4)](this.#userId,_0x549531);}#checkIfShouldReconnect(){return this.#shouldReloadSession=!authDb['hasCreds'](this.#userId);}}module['exports']=SessionManager;