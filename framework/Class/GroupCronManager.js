const a65_0xeb422c=a65_0x24ac;(function(_0x42b689,_0x5f422d){const _0x1d407e=a65_0x24ac,_0x9e4eba=_0x42b689();while(!![]){try{const _0x5efd8e=parseInt(_0x1d407e(0x11c))/0x1+-parseInt(_0x1d407e(0x11b))/0x2+-parseInt(_0x1d407e(0x11e))/0x3+-parseInt(_0x1d407e(0x105))/0x4*(-parseInt(_0x1d407e(0x121))/0x5)+-parseInt(_0x1d407e(0x11d))/0x6*(parseInt(_0x1d407e(0x123))/0x7)+-parseInt(_0x1d407e(0x10e))/0x8+parseInt(_0x1d407e(0x122))/0x9*(parseInt(_0x1d407e(0x106))/0xa);if(_0x5efd8e===_0x5f422d)break;else _0x9e4eba['push'](_0x9e4eba['shift']());}catch(_0x16d92b){_0x9e4eba['push'](_0x9e4eba['shift']());}}}(a65_0x58ea,0x32480));const a65_0xe56872=(function(){let _0x56e7fe=!![];return function(_0x50034e,_0x3222e8){const _0x84167c=_0x56e7fe?function(){if(_0x3222e8){const _0x3590a9=_0x3222e8['apply'](_0x50034e,arguments);return _0x3222e8=null,_0x3590a9;}}:function(){};return _0x56e7fe=![],_0x84167c;};}()),a65_0x18e904=a65_0xe56872(this,function(){const _0x4d54c8=a65_0x24ac,_0x471e64={'RoTIt':'(((.+)+)+)+$'};return a65_0x18e904[_0x4d54c8(0x107)]()['search'](_0x471e64['RoTIt'])[_0x4d54c8(0x107)]()[_0x4d54c8(0x10c)](a65_0x18e904)[_0x4d54c8(0x104)](_0x4d54c8(0x114));});a65_0x18e904();function a65_0x24ac(_0x5f0e36,_0x1dd1ab){const _0x340e5e=a65_0x58ea();return a65_0x24ac=function(_0x18e904,_0xe56872){_0x18e904=_0x18e904-0xfd;let _0x58ea07=_0x340e5e[_0x18e904];if(a65_0x24ac['qOkiGC']===undefined){var _0x24ace8=function(_0x3c4014){const _0x3b928c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1028cb='',_0x6bd3c7='',_0x1a62ff=_0x1028cb+_0x24ace8;for(let _0x3a6151=0x0,_0x1d79a2,_0x1cbd74,_0x3c0906=0x0;_0x1cbd74=_0x3c4014['charAt'](_0x3c0906++);~_0x1cbd74&&(_0x1d79a2=_0x3a6151%0x4?_0x1d79a2*0x40+_0x1cbd74:_0x1cbd74,_0x3a6151++%0x4)?_0x1028cb+=_0x1a62ff['charCodeAt'](_0x3c0906+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x1d79a2>>(-0x2*_0x3a6151&0x6)):_0x3a6151:0x0){_0x1cbd74=_0x3b928c['indexOf'](_0x1cbd74);}for(let _0x4d675c=0x0,_0x17fb7f=_0x1028cb['length'];_0x4d675c<_0x17fb7f;_0x4d675c++){_0x6bd3c7+='%'+('00'+_0x1028cb['charCodeAt'](_0x4d675c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x6bd3c7);};a65_0x24ac['odYdqv']=_0x24ace8,_0x5f0e36=arguments,a65_0x24ac['qOkiGC']=!![];}const _0x439dd5=_0x340e5e[0x0],_0x3f0f84=_0x18e904+_0x439dd5,_0x5922b9=_0x5f0e36[_0x3f0f84];if(!_0x5922b9){const _0x5b44b8=function(_0x59dae6){this['uXqlUp']=_0x59dae6,this['yWPiLU']=[0x1,0x0,0x0],this['YaciEi']=function(){return'newState';},this['jDEFls']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['KbQyLz']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5b44b8['prototype']['Qlmcok']=function(){const _0x5f492e=new RegExp(this['jDEFls']+this['KbQyLz']),_0x3e5b19=_0x5f492e['test'](this['YaciEi']['toString']())?--this['yWPiLU'][0x1]:--this['yWPiLU'][0x0];return this['dxVvQq'](_0x3e5b19);},_0x5b44b8['prototype']['dxVvQq']=function(_0x1c79a6){if(!Boolean(~_0x1c79a6))return _0x1c79a6;return this['XiUbmc'](this['uXqlUp']);},_0x5b44b8['prototype']['XiUbmc']=function(_0x56afd3){for(let _0x55e248=0x0,_0x16c3f3=this['yWPiLU']['length'];_0x55e248<_0x16c3f3;_0x55e248++){this['yWPiLU']['push'](Math['round'](Math['random']())),_0x16c3f3=this['yWPiLU']['length'];}return _0x56afd3(this['yWPiLU'][0x0]);},new _0x5b44b8(a65_0x24ac)['Qlmcok'](),_0x58ea07=a65_0x24ac['odYdqv'](_0x58ea07),_0x5f0e36[_0x3f0f84]=_0x58ea07;}else _0x58ea07=_0x5922b9;return _0x58ea07;},a65_0x24ac(_0x5f0e36,_0x1dd1ab);}const cron=require('node-cron'),s=require(a65_0xeb422c(0x109)),{cronExists,addCron:addCronInDB,deleteCron,getCronsByBot}=require('../../bdd/cron');class GroupCronManager{static #crons=[];static['initiateCron'](_0x52eb67,_0x205906,_0x2b1e80,_0x3a718b){const _0x3de057=a65_0xeb422c,_0x2a4bad={'KvLYX':'announcement','HKfut':'unmute'};let [_0x2f8a89,_0x5078ca]=_0x52eb67[_0x3de057(0xfd)](':')['map'](_0x1567ca=>_0x1567ca['trim']());if(_0x2f8a89['startsWith']('0'))_0x2f8a89=_0x2f8a89['replace']('0','');switch(_0x2b1e80){case'mute':const _0x5c3ae3=cron['schedule'](_0x5078ca+'\x20'+_0x2f8a89+_0x3de057(0x115),async()=>{const _0x4577e1=_0x3de057;try{await _0x3a718b['groupSettingUpdate'](_0x205906,_0x2a4bad[_0x4577e1(0x102)]),await _0x3a718b['sendMessage'](_0x205906,{'text':'Tick\x20tock,\x20the\x20exciting\x20discussions\x20are\x20coming\x20to\x20an\x20end.\x20We\x20thank\x20you\x20for\x20your\x20active\x20participation;\x20now\x20it\x27s\x20time\x20to\x20close\x20the\x20group\x20for\x20today.'});}catch(_0x148d0c){console['log'](_0x4577e1(0x117),_0x148d0c);}},{'timezone':s[_0x3de057(0xfe)]});GroupCronManager.#crons[_0x3de057(0x118)]({'id':_0x52eb67,'groupId':_0x205906,'action':_0x2b1e80,'botId':_0x3a718b['botId'],'cronTask':_0x5c3ae3});break;case _0x2a4bad['HKfut']:const _0x4eae79=cron[_0x3de057(0x112)](_0x5078ca+'\x20'+_0x2f8a89+'\x20*\x20*\x20*',async()=>{const _0x5b0477=_0x3de057;try{await _0x3a718b['groupSettingUpdate'](_0x205906,'not_announcement'),await _0x3a718b[_0x5b0477(0x113)](_0x205906,{'text':_0x5b0477(0x116)});}catch(_0x21848a){console['log'](_0x5b0477(0x119),_0x21848a);}},{'timezone':s['TIME_ZONE']});GroupCronManager.#crons['push']({'id':_0x52eb67,'groupId':_0x205906,'action':_0x2b1e80,'botId':_0x3a718b['botId'],'cronTask':_0x4eae79});break;}}static['getCron'](_0x2b73e7,_0x14754e,_0x199d9c){const _0x21cc7a=a65_0xeb422c;return GroupCronManager.#crons['find'](_0x249b38=>_0x249b38['id']===_0x2b73e7&&_0x249b38['groupId']===_0x14754e&&_0x249b38[_0x21cc7a(0x11f)]===_0x199d9c);}static['addCron'](_0x2014d7,_0x5b0cbc,_0x36368d,_0x2c60b2,_0x23c2f8){const _0x4f7d11=a65_0xeb422c,_0x28a290={'OoUmo':_0x4f7d11(0x10a),'sgQCW':function(_0x51ef7c,_0x310233,_0x4a9c7d,_0x261a20,_0x4158e8){return _0x51ef7c(_0x310233,_0x4a9c7d,_0x261a20,_0x4158e8);}},_0x35fd2f=cronExists(_0x2014d7,_0x5b0cbc,_0x2c60b2);if(_0x35fd2f)throw{'type':_0x4f7d11(0x120),'reason':_0x28a290['OoUmo']};GroupCronManager['initiateCron'](_0x2014d7,_0x5b0cbc,_0x36368d,_0x23c2f8),_0x28a290[_0x4f7d11(0x110)](addCronInDB,_0x2014d7,_0x5b0cbc,_0x2c60b2,_0x36368d);}static[a65_0xeb422c(0xff)](_0x5f545f,_0x1f1232,_0x3b4655){const _0x55c545=a65_0xeb422c,_0x3fcdad={'rJsvF':'No\x20cron\x20has\x20been\x20activated\x20for\x20this\x20time'},_0xc1e327=GroupCronManager[_0x55c545(0x10f)](_0x5f545f,_0x1f1232,_0x3b4655);if(!_0xc1e327)throw{'type':'UnAutorised','reason':_0x3fcdad['rJsvF']};_0xc1e327['cronTask']['stop'](),deleteCron(_0x5f545f,_0x1f1232,_0x3b4655);}static['initialiseCronsOnStart'](_0x28b412){const _0x368726=a65_0xeb422c,_0x40e3dd={'pUfop':function(_0x3b4d67,_0x11fe70){return _0x3b4d67(_0x11fe70);},'YFuis':function(_0x47c93c,_0x4aa971){return _0x47c93c===_0x4aa971;},'XNeMs':'Initialisation\x20des\x20crons\x20pour\x20le\x20bot\x20:\x20'},_0x144e3b=_0x40e3dd[_0x368726(0x103)](getCronsByBot,_0x28b412[_0x368726(0x11f)]);if(_0x40e3dd[_0x368726(0x10d)](_0x144e3b['length'],0x0))return;console[_0x368726(0x111)](_0x40e3dd[_0x368726(0x101)],_0x28b412['botId']),_0x144e3b['forEach'](_0x38e393=>{const _0xb18e51=_0x368726;GroupCronManager['initiateCron'](_0x38e393['id'],_0x38e393['group_id'],_0x38e393[_0xb18e51(0x100)],_0x28b412);});}static[a65_0xeb422c(0x124)](_0x2dba34){const _0x4507e4=a65_0xeb422c,_0x4595f5={'UmRnC':function(_0x1f54ca,_0x1220c3){return _0x1f54ca!==_0x1220c3;}};if(_0x4595f5['UmRnC'](typeof _0x2dba34,_0x4507e4(0x108)))return null;const _0x1e6ae3=_0x2dba34[_0x4507e4(0x10b)]()['match'](/^(0?([0-9])|1[0-9]|2[0-3]):([0-5][0-9])$/);if(!_0x1e6ae3)return null;return{'hr':_0x1e6ae3[0x1]['startsWith']('0')?_0x1e6ae3[0x1]['substring'](0x1):_0x1e6ae3[0x1],'min':_0x1e6ae3[0x3]};}}module[a65_0xeb422c(0x11a)]=GroupCronManager;function a65_0x58ea(){const _0x22241f=['lI4VlI4VC2v0','qsbJCM9UigHHCYbHBhjLywr5igjLzw4Gywn0AxzHDgvKigzVCIb0AgLZihrPBwu','DhjPBq','y29UC3rYDwn0B3i','wuz1Axm','mJq2mdaZmMvUuNfNCq','z2v0q3jVBG','C2Drq1C','Bg9N','C2nOzwr1Bgu','C2vUze1LC3nHz2u','kcGOlISPkYKRksSK','icOGkIaQ','sxqNCYb0Aw1LihrVig9Wzw4GDgHLigrVB3jZig9Mig91CIbNCM91CceGv2vSy29TzsbLDMvYEw9Uzsb0BYb0AgLZigv4y2L0Aw5NignVBw11BML0Esb3AgvYzsb3zsbZAgfYzsbHBMqGBgvHCM4GDg9NzxrOzxiU','w0fvve9nvvrfluvsuK9sxsa6','ChvZAa','w0fvve9vtK1vveuTrvjst1jDidO','zxHWB3j0CW','mta4odG4zujnqu5Z','mZi5mtC1qw9fBgzg','otqWotHLwLDTC0C','mtiZndm1yxbAA3rp','yM90swq','vw5bDxrVCMLZzwq','nvPyrvDlsa','mtHqAxHIqwO','mtGYCLnWzLLL','CgfYC2viCK1PBG','C3bSAxq','veLnrv9At05f','CMvTB3zLq3jVBG','ywn0Aw9U','we5Ltxm','s3zmwvG','CfvMB3a','C2vHCMnO','mti5mZa2ngjuA0PZtq','mtGYmtGXmfLHu3n1Aa','Dg9tDhjPBMC','C3rYAw5N'];a65_0x58ea=function(){return _0x22241f;};return a65_0x58ea();}