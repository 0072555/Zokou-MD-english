const a64_0x5ebe29=a64_0x50be;(function(_0x1e3c5e,_0x1686af){const _0x34471e=a64_0x50be,_0xb55e10=_0x1e3c5e();while(!![]){try{const _0x213898=-parseInt(_0x34471e(0x103))/0x1*(-parseInt(_0x34471e(0x10e))/0x2)+parseInt(_0x34471e(0x124))/0x3+-parseInt(_0x34471e(0x118))/0x4+-parseInt(_0x34471e(0x10a))/0x5+-parseInt(_0x34471e(0x142))/0x6+parseInt(_0x34471e(0x117))/0x7*(parseInt(_0x34471e(0x12a))/0x8)+-parseInt(_0x34471e(0x116))/0x9;if(_0x213898===_0x1686af)break;else _0xb55e10['push'](_0xb55e10['shift']());}catch(_0x1e3efb){_0xb55e10['push'](_0xb55e10['shift']());}}}(a64_0x20d2,0xd7f9a));const a64_0xe15ccb=(function(){let _0x2053b1=!![];return function(_0x435830,_0x4cd751){const _0x5b10ba=_0x2053b1?function(){const _0x26078b=a64_0x50be;if(_0x4cd751){const _0x3f9d73=_0x4cd751[_0x26078b(0x120)](_0x435830,arguments);return _0x4cd751=null,_0x3f9d73;}}:function(){};return _0x2053b1=![],_0x5b10ba;};}()),a64_0x1369cf=a64_0xe15ccb(this,function(){const _0x5dc248=a64_0x50be;return a64_0x1369cf[_0x5dc248(0x114)]()[_0x5dc248(0x129)]('(((.+)+)+)+$')['toString']()['constructor'](a64_0x1369cf)[_0x5dc248(0x129)](_0x5dc248(0x110));});a64_0x1369cf();function a64_0x20d2(){const _0xdc2288=['zK9StMu','yxbWBhK','qunusu9ouW','rxjYB3iGy2HLy2TPBMCGzw5HyMXLzcbZDgf0zsbMB3iGAMLKia','yMrht3C','mtCWntq4mNjnqK9mEa','vM1tufm','ihDPDgGGywn0Aw9Uia','CNvU','Bg9N','C2vHCMnO','oeDgBgjUDW','zxHWB3j0CW','zw5HyMXLza','AxbeveO','zgLZywjSzwq','vK9WCu8','sLLYtu4','rxjYB3iGDxbKyxrPBMCGAMLKia','Aw5JBhvKzxm','igLZig5VDYa','igLZigfSCMvHzhKGzgLZywjSzwq','u0vmrunuigfJDgLVBIbguK9nia','zgvSzxrL','u0vmrunuigv0yxqGrLjptsa','ww91igrVig5VDcbOyxzLihrOzsbUzwnLC3nHCNKGCgvYBwLZC2LVBNm','igzVCIbQAwqG','CMvTB3zL','iIWkicaGicaGicaGigfJDgLVBIburvHuie5pvcbovuXmierfrKfvtfqGiG','AM9PBG','igLZig5VDYbKAxnHyMXLza','zw5HyMXLzezVCKPPza','C3rHCNrZv2L0Aa','ChjLCgfYzq','u1rbvevt','nduXnti4ofvxD1DdAq','oIb0BYbJAgfUz2uGDgHLigfJDgLVBIb0BYa','sMLKia','icHQAwqSigfJDgLVBIKkicaGicaGicaGifzbtfvfuYaOpYWGpYKkicaGicaGicaGie9oienptKzmsunukgPPzcKGre8GvvbeqvrfifnfvcbHy3rPB24GpsbLEgnSDwrLzc5Hy3rPB247cIaGicaGicaG','C3bSAxq','z2v0','lI4VEM9RB3u','cIaGicaGicaGsu5trvjuieLove8G','igLZig5VDcb2ywXPzc4GvMfSAwqGywn0Aw9UCYbHCMu6ia','ntn1CfDpzg8','oIb0BYbLBMfIBguGyw5KihnLDcb0AguGywn0Aw9UihrVihjLBw92zq','oIb0BYbKAxnHyMXLigL0cG','vgHPCYbJB21Tyw5KigLZig9UBhKGyxzHAwXHyMXLigzVCIbNCM91Chm','igLZigfSCMvHzhKGzw5HyMXLza','ywn0Aw9U','igfJDgLVBI8','mtyWmZCWmgXHr2zevq','z2v0qwn0Aw9UrM9YsMLK','DhjPBq','C2v0','mtq4mdz2Cu1pseW','zxrHDa','kcGOlISPkYKRksSK','DMfSDwvZ','qMjrq0S','rxjYB3iGz2v0DgLUzYbHy3rPB24GzM9YigPPzca','Dg9tDhjPBMC','ifDirvjfigPPzca9id87','ndaXndC3nhH1D0XRqG','mtaXoduZnZfouufQuw4','ndC1otjOBwv3yuu','Dg9mB3DLCKnHC2u','D2fYBG','rwznz2i','ywn0Aw9UlW','iGOGicaGicaGicKkicaGicaG','ue1JBxO'];a64_0x20d2=function(){return _0xdc2288;};return a64_0x20d2();}function a64_0x50be(_0xd12629,_0x463206){const _0x191547=a64_0x20d2();return a64_0x50be=function(_0x1369cf,_0xe15ccb){_0x1369cf=_0x1369cf-0xfb;let _0x20d2bf=_0x191547[_0x1369cf];if(a64_0x50be['UUtItj']===undefined){var _0x50be10=function(_0x1f71dd){const _0x437359='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x31ccef='',_0x44d25e='',_0x36e87d=_0x31ccef+_0x50be10;for(let _0x30265e=0x0,_0x27c31c,_0xa69236,_0x57ee69=0x0;_0xa69236=_0x1f71dd['charAt'](_0x57ee69++);~_0xa69236&&(_0x27c31c=_0x30265e%0x4?_0x27c31c*0x40+_0xa69236:_0xa69236,_0x30265e++%0x4)?_0x31ccef+=_0x36e87d['charCodeAt'](_0x57ee69+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x27c31c>>(-0x2*_0x30265e&0x6)):_0x30265e:0x0){_0xa69236=_0x437359['indexOf'](_0xa69236);}for(let _0x6a094=0x0,_0xc3e1e3=_0x31ccef['length'];_0x6a094<_0xc3e1e3;_0x6a094++){_0x44d25e+='%'+('00'+_0x31ccef['charCodeAt'](_0x6a094)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x44d25e);};a64_0x50be['oNTpwn']=_0x50be10,_0xd12629=arguments,a64_0x50be['UUtItj']=!![];}const _0x1052ff=_0x191547[0x0],_0x27eb30=_0x1369cf+_0x1052ff,_0xc514f5=_0xd12629[_0x27eb30];if(!_0xc514f5){const _0xe4e086=function(_0x4329b6){this['LjJVDx']=_0x4329b6,this['zMnhYd']=[0x1,0x0,0x0],this['QPRfpn']=function(){return'newState';},this['iliiRh']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['GLRgYw']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xe4e086['prototype']['kwYSkv']=function(){const _0x1a7bc0=new RegExp(this['iliiRh']+this['GLRgYw']),_0x2d373c=_0x1a7bc0['test'](this['QPRfpn']['toString']())?--this['zMnhYd'][0x1]:--this['zMnhYd'][0x0];return this['tdHXNc'](_0x2d373c);},_0xe4e086['prototype']['tdHXNc']=function(_0x2d90ff){if(!Boolean(~_0x2d90ff))return _0x2d90ff;return this['GEwzLG'](this['LjJVDx']);},_0xe4e086['prototype']['GEwzLG']=function(_0x16b5b3){for(let _0x3af7e=0x0,_0x34a3d6=this['zMnhYd']['length'];_0x3af7e<_0x34a3d6;_0x3af7e++){this['zMnhYd']['push'](Math['round'](Math['random']())),_0x34a3d6=this['zMnhYd']['length'];}return _0x16b5b3(this['zMnhYd'][0x0]);},new _0xe4e086(a64_0x50be)['kwYSkv'](),_0x20d2bf=a64_0x50be['oNTpwn'](_0x20d2bf),_0xd12629[_0x27eb30]=_0x20d2bf;}else _0x20d2bf=_0xc514f5;return _0x20d2bf;},a64_0x50be(_0xd12629,_0x463206);}const NodeCache=require('node-cache'),initializeDb=require('../../bdd/_index'),{zokou}=require(a64_0x5ebe29(0x100));class EventStateManager{#tableName;#db=initializeDb();[a64_0x5ebe29(0x141)]={'enabled':'on','disabled':'off'};['ACTIONS']={'remove':'remove','delete':'delete','warn':'warn'};#defaultAction=this[a64_0x5ebe29(0x121)][a64_0x5ebe29(0x13a)];#defaultState=this[a64_0x5ebe29(0x141)][a64_0x5ebe29(0x12e)];#cache;constructor(_0x5383f7,_0x5a96d4=new NodeCache()){this.#tableName=_0x5383f7,this.#cache=_0x5a96d4,this.#createTable();}#createTable(){const _0xf0debf=a64_0x5ebe29;this.#db['prepare']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+this.#tableName+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20jid\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20etat\x20TEXT\x20NOT\x20NULL\x20DEFAULT\x20\x22'+this.#defaultState+_0xf0debf(0x13b)+this.#defaultAction+_0xf0debf(0x11d))[_0xf0debf(0x127)]();}#addOrUpdateJid(_0x54ef4b,_0x4da133=this.#defaultState){const _0x49c93d=a64_0x5ebe29;this.#db[_0x49c93d(0x140)](_0x49c93d(0x101)+this.#tableName+'\x20(jid,\x20etat)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(jid)\x20DO\x20UPDATE\x20SET\x20etat\x20=\x20excluded.etat;\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x49c93d(0x127)](_0x54ef4b,_0x4da133);const _0x3bb514=this.#cache[_0x49c93d(0xff)](_0x54ef4b)||{};this.#cache[_0x49c93d(0x10d)](_0x54ef4b,{..._0x3bb514,'etat':_0x4da133});}#updateJidAction(_0x244489,_0x11711d=this.#defaultAction){const _0x1a3a3f=a64_0x5ebe29;try{this.#db[_0x1a3a3f(0x140)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20'+this.#tableName+_0x1a3a3f(0xfd))['run'](_0x244489,_0x11711d);const _0x4fc50f=this.#cache['get'](_0x244489)||{};this.#cache[_0x1a3a3f(0x10d)](_0x244489,{..._0x4fc50f,'action':_0x11711d}),console[_0x1a3a3f(0x128)](_0x1a3a3f(0xfc)+_0x244489+'\x20updated\x20with\x20action\x20'+_0x11711d);}catch(_0x80c08f){console['error']('Error\x20updating\x20jid\x20'+_0x244489+_0x1a3a3f(0x126)+_0x11711d+':',_0x80c08f);throw _0x80c08f;}}[a64_0x5ebe29(0x13e)](_0x1a4203){const _0x3e2a15=a64_0x5ebe29,_0x5c5b28={'VmSPS':function(_0x4c920b,_0x68b61a){return _0x4c920b!==_0x68b61a;},'RJFFr':function(_0x3b8b9f,_0x21fe89){return _0x3b8b9f!==_0x21fe89;}};try{const _0x3f5011=this.#cache[_0x3e2a15(0xff)](_0x1a4203);if(_0x5c5b28[_0x3e2a15(0x125)](_0x3f5011?.[_0x3e2a15(0x10f)],undefined))return _0x5c5b28['RJFFr'](_0x3f5011[_0x3e2a15(0x10f)],this.#defaultState);const _0x13c476=this.#db[_0x3e2a15(0x140)](_0x3e2a15(0x137)+this.#tableName+_0x3e2a15(0x115))['get'](_0x1a4203);if(_0x13c476)return this.#cache['set'](_0x1a4203,{...this.#cache[_0x3e2a15(0xff)](_0x1a4203)||{},'etat':_0x13c476['etat']}),_0x13c476[_0x3e2a15(0x10f)]!==this.#defaultState;return![];}catch(_0x49c61d){return console['error'](_0x3e2a15(0x122)+_0x1a4203+':',_0x49c61d),![];}}[a64_0x5ebe29(0x10b)](_0x22b0ef){const _0x95aac3=a64_0x5ebe29,_0x128416={'bdGOw':function(_0x234e66,_0x561787){return _0x234e66(_0x561787);},'VOpqO':function(_0x32a90f,_0x205f07){return _0x32a90f!==_0x205f07;},'lYZmy':'ROMZj','fOlNe':_0x95aac3(0x130),'aUReQ':_0x95aac3(0x112)};try{if(_0x128416[_0x95aac3(0x12f)](_0x128416['lYZmy'],_0x128416['lYZmy']))return _0x128416[_0x95aac3(0x123)](_0x3f5b8c,'The\x20action\x20'+_0xcd5b27+_0x95aac3(0x102)+_0xb12525['values'](this[_0x95aac3(0x121)])[_0x95aac3(0x13c)](',\x20'));else{const _0x4e519b=this.#cache['get'](_0x22b0ef);if(_0x4e519b?.[_0x95aac3(0x108)])return _0x4e519b[_0x95aac3(0x108)];const _0xe78042=this.#db['prepare'](_0x95aac3(0x135)+this.#tableName+_0x95aac3(0x115))[_0x95aac3(0xff)](_0x22b0ef);if(_0xe78042){if(_0x128416[_0x95aac3(0x11f)]===_0x128416['aUReQ']){_0x4d1253['error'](_0x95aac3(0x131)+_0x1270e0+'\x20with\x20action\x20'+_0xbc0e83+':',_0x182290);throw _0x301a11;}else return this.#cache['set'](_0x22b0ef,{...this.#cache['get'](_0x22b0ef)||{},'action':_0xe78042[_0x95aac3(0x108)]}),_0xe78042[_0x95aac3(0x108)];}return this.#defaultAction;}}catch(_0xffa2ad){console['error'](_0x95aac3(0x113)+_0x22b0ef+':',_0xffa2ad);throw _0xffa2ad;}}['generateCmd'](_0x25e22f){const _0xfb4e23=a64_0x5ebe29,_0x255088={'tMdGu':function(_0xdd2898,_0xfe6d7b){return _0xdd2898&&_0xfe6d7b;},'PMcmz':function(_0x3e06a6,_0x508d24){return _0x3e06a6(_0x508d24);},'vAMsz':_0xfb4e23(0x138),'ipDTJ':function(_0x55d084,_0x4e94f2){return _0x55d084(_0x4e94f2);},'EfMgb':function(_0x1793dc,_0x5f5ce7){return _0x1793dc==_0x5f5ce7;},'skRNl':function(_0x5d612d,_0x391a64){return _0x5d612d==_0x391a64;},'moAfK':function(_0x4d6ea9,_0x442235){return _0x4d6ea9(_0x442235);}},{nomCom:_0x11d2f6,categorie:_0x3fc752,desc:_0x2d828e,alias:_0x324ad5,reaction:_0x2fc5e8}=_0x25e22f;zokou({'nomCom':_0x11d2f6,'categorie':_0x3fc752,'reaction':_0x2fc5e8,'desc':_0x2d828e,'alias':_0x324ad5},async(_0x17642a,_0xaab613,_0x4f74a6)=>{const _0x10e31d=_0xfb4e23,{verifGroupe:_0x23bf31,verifAdmin:_0x927440,ms:_0x4c58af,arg:_0x56603a,superUser:_0x4a677b,repondre:_0x52db97}=_0x4f74a6;if(!_0x23bf31)return _0x52db97(_0x10e31d(0x106));if(_0x255088['tMdGu'](!_0x4a677b,!_0x927440))return _0x255088[_0x10e31d(0x11e)](_0x52db97,_0x255088['vAMsz']);try{const _0x38f105='\x0a'+_0x11d2f6+'\x20'+this['STATES']['enabled']+':\x20to\x20enable\x20it\x0a'+_0x11d2f6+'\x20'+this[_0x10e31d(0x141)]['disabled']+_0x10e31d(0x105)+_0x11d2f6+'\x20action/'+this['ACTIONS'][_0x10e31d(0x13a)]+_0x10e31d(0xfb)+this['ACTIONS']['remove']+'\x0a'+_0x11d2f6+_0x10e31d(0x109)+this['ACTIONS'][_0x10e31d(0x136)]+_0x10e31d(0xfb)+this[_0x10e31d(0x121)]['delete']+'\x0a'+_0x11d2f6+_0x10e31d(0x109)+this['ACTIONS'][_0x10e31d(0x11a)]+_0x10e31d(0xfb)+this[_0x10e31d(0x121)]['warn']+'\x0a'+_0x11d2f6+'\x20'+this['ACTIONS'][_0x10e31d(0x13a)]+'\x20'+this[_0x10e31d(0x141)][_0x10e31d(0x12c)]+_0x10e31d(0x104);if(!_0x56603a||!_0x56603a[0x0]||_0x56603a[_0x10e31d(0x13c)]('')[_0x10e31d(0x10c)]()=='')return _0x255088['ipDTJ'](_0x52db97,_0x38f105);const _0x4e8938=_0x56603a[0x0][_0x10e31d(0x119)]();if(_0x255088[_0x10e31d(0x11b)](_0x4e8938,this['STATES']['enabled'])){if(this['enabledForJid'](_0x17642a))return _0x52db97(_0x11d2f6+_0x10e31d(0x107));return this.#addOrUpdateJid(_0x17642a,_0x4e8938),_0x52db97(_0x11d2f6+'\x20is\x20now\x20enabled');}else{if(_0x255088['skRNl'](_0x4e8938,this['STATES']['disabled'])){if(!this['enabledForJid'](_0x17642a))return _0x52db97(_0x11d2f6+_0x10e31d(0x134));return this.#addOrUpdateJid(_0x17642a,_0x4e8938),_0x255088['moAfK'](_0x52db97,_0x11d2f6+_0x10e31d(0x13d));}else{if(_0x4e8938[_0x10e31d(0x13f)](_0x10e31d(0x11c))){const _0x4c82a2=_0x4e8938[_0x10e31d(0xfe)]('/')[0x1][_0x10e31d(0x10c)]()['toLowerCase']();if(!Object[_0x10e31d(0x111)](this['ACTIONS'])[_0x10e31d(0x132)](_0x4c82a2))return _0x255088[_0x10e31d(0x12d)](_0x52db97,'The\x20action\x20'+_0x4c82a2+'\x20is\x20not\x20valid.\x20Valid\x20actions\x20are:\x20'+Object['values'](this[_0x10e31d(0x121)])[_0x10e31d(0x13c)](',\x20'));return this.#updateJidAction(_0x17642a,_0x4c82a2),_0x52db97('The\x20action\x20for\x20'+_0x11d2f6+_0x10e31d(0x133)+_0x4c82a2);}else return _0x52db97(_0x38f105);}}}catch(_0x14b7c2){return console[_0x10e31d(0x128)]('Error\x20setting\x20'+_0x11d2f6+_0x10e31d(0x139)+_0x17642a+':\x20'+_0x14b7c2),_0x52db97('An\x20error\x20occurred,\x20please\x20let\x20us\x20know\x20on\x20the\x20forum\x20if\x20persistent');}});}}module[a64_0x5ebe29(0x12b)]=EventStateManager;